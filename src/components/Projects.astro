---
import { projects } from "../data/projects";
import { useTranslations } from "../i18n/utils";
import { Github, ArrowUpRight } from "lucide-astro";

const { lang } = Astro.props;
const t = useTranslations(lang);

const projectList = projects || [];
---

<section
  class="max-w-4xl mx-auto mb-20 px-6"
  aria-labelledby="projects-heading"
>
  <div>
    <h3 id="projects-heading" class="text-xl font-semibold text-primary">
      {t("projects.title")}
    </h3>
  </div>

  <div class="flex flex-col">
    {
      projectList.map((project) => (
        <article class="group relative py-8 border-b border-muted flex flex-col md:flex-row md:items-center justify-between gap-6 transition-all duration-300">
          <div class="flex-1 space-y-1">
            <div class="flex items-center gap-3">
              <h3 class="text-lg font-medium text-primary transition-colors">
                {t(project.titleKey)}
              </h3>

              <div class="hidden sm:flex gap-2">
                {project.tags.slice(0, 2).map((tag) => (
                  <span class="text-[10px] font-medium text-foreground/40 uppercase tracking-tight">
                    {tag}
                  </span>
                ))}
              </div>
            </div>

            <p class="text-foreground text-[0.95rem] max-w-xl leading-snug">
              {t(project.descriptionKey)}
            </p>
          </div>

          <div class="flex items-center gap-2">
            {project.githubUrl && (
              <a
                href={project.githubUrl}
                target="_blank"
                class="p-2 text-foreground/50 hover:text-foreground transition-all duration-300"
                title={t("projects.code")}
              >
                <Github class="w-[18px] h-[18px] stroke-[1.2px]" />
              </a>
            )}
            {project.projectUrl && (
              <a
                href={project.projectUrl}
                target="_blank"
                class="flex items-center gap-1.5 px-3 py-1.5 text-foreground hover:text-primary transition-all duration-300 group/link"
              >
                <span class="text-sm font-medium">
                  {t("projects.view") || "Ver"}
                </span>
                <ArrowUpRight class="w-3.5 h-3.5 transition-transform group-hover/link:-translate-y-0.5 group-hover/link:translate-x-0.5" />
              </a>
            )}
          </div>
          <div class="absolute bottom-[-0.5px] left-0 h-[1px] w-0 bg-primary/40 transition-all duration-500 group-hover:w-full" />
        </article>
      ))
    }
  </div>
</section>
